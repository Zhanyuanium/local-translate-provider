<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="local_translate_provider.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:local_translate_provider"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Local Translate Provider">

    <NavigationView
        x:Name="NavView"
        IsBackButtonVisible="Collapsed"
        PaneDisplayMode="Left"
        IsSettingsVisible="False"
        SelectionChanged="NavView_SelectionChanged">
        <NavigationView.MenuItems>
            <NavigationViewItem Content="通用" Tag="General">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Setting"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem Content="模型" Tag="Model">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="ShowResults"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem Content="服务" Tag="Service">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Globe"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem Content="关于" Tag="About">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Help"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>
        </NavigationView.MenuItems>

        <ScrollViewer
            Background="Transparent"
            HorizontalScrollBarVisibility="Disabled"
            VerticalScrollBarVisibility="Auto"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
            <Grid Margin="0,0" HorizontalAlignment="Stretch">
                <Grid MaxWidth="1000" HorizontalAlignment="Stretch" Padding="20,0">
                    <!-- 通用 -->
                    <StackPanel x:Name="GeneralPanel" Visibility="Collapsed" Spacing="8" HorizontalAlignment="Stretch">
                    <TextBlock x:Name="GeneralTitle" Text="通用" FontSize="28" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    <toolkit:SettingsCard Header="开机自启动" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <ToggleSwitch x:Name="RunAtStartupSwitch" VerticalAlignment="Center"/>
                    </toolkit:SettingsCard>
                    <toolkit:SettingsCard Header="启动时最小化到托盘" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <ToggleSwitch x:Name="MinimizeTraySwitch" VerticalAlignment="Center"/>
                    </toolkit:SettingsCard>
                    <Button Content="重置为默认设置" Click="ResetSettings_Click" HorizontalAlignment="Left" Margin="0,8,0,0"/>
                    </StackPanel>

                    <!-- 模型 -->
                    <StackPanel x:Name="ModelPanel" Visibility="Collapsed" Spacing="8" HorizontalAlignment="Stretch">
                    <TextBlock x:Name="ModelTitle" Text="模型" FontSize="28" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    <toolkit:SettingsCard Header="当前状态" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <TextBlock x:Name="StatusText" Text="" TextWrapping="Wrap"/>
                    </toolkit:SettingsCard>
                    <toolkit:SettingsCard Header="翻译后端" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <ComboBox x:Name="BackendCombo" MinWidth="180" VerticalAlignment="Center">
                            <ComboBoxItem Content="Phi Silica (Copilot+ PC)" Tag="PhiSilica"/>
                            <ComboBoxItem Content="Foundry Local" Tag="FoundryLocal"/>
                        </ComboBox>
                    </toolkit:SettingsCard>
                    <StackPanel x:Name="FoundryPanel" Visibility="Collapsed" Spacing="8">
                        <toolkit:SettingsCard Header="Foundry Local 模型" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                            <TextBox x:Name="ModelAliasBox" PlaceholderText="phi-3.5-mini" MinWidth="180" VerticalAlignment="Center"/>
                        </toolkit:SettingsCard>
                        <toolkit:SettingsCard Header="运行策略" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                            <ComboBox x:Name="StrategyCombo" MinWidth="180" VerticalAlignment="Center">
                                <ComboBoxItem Content="节能" Tag="PowerSaving"/>
                                <ComboBoxItem Content="高性能" Tag="HighPerformance"/>
                                <ComboBoxItem Content="手动指定设备" Tag="Manual"/>
                            </ComboBox>
                        </toolkit:SettingsCard>
                        <toolkit:SettingsCard x:Name="ManualDeviceBorder" Visibility="Collapsed" Header="设备" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                            <ComboBox x:Name="DeviceCombo" MinWidth="180" VerticalAlignment="Center">
                                <ComboBoxItem Content="CPU" Tag="CPU"/>
                                <ComboBoxItem Content="GPU" Tag="GPU"/>
                                <ComboBoxItem Content="NPU" Tag="NPU"/>
                                <ComboBoxItem Content="WebGPU" Tag="WebGPU"/>
                            </ComboBox>
                        </toolkit:SettingsCard>
                    </StackPanel>
                    <Button x:Name="SaveButton" Content="保存并重启服务" Click="SaveButton_Click" HorizontalAlignment="Stretch" Margin="0,8,0,0"/>
                    </StackPanel>

                    <!-- 服务 -->
                    <StackPanel x:Name="ServicePanel" Visibility="Collapsed" Spacing="8" HorizontalAlignment="Stretch">
                    <TextBlock x:Name="ServiceTitle" Text="服务" FontSize="28" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    <toolkit:SettingsCard Header="端口" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <TextBox x:Name="PortBox" PlaceholderText="52860" MinWidth="120" VerticalAlignment="Center"/>
                    </toolkit:SettingsCard>
                    <toolkit:SettingsExpander Header="模拟端点" HorizontalAlignment="Stretch">
                        <toolkit:SettingsExpander.Items>
                            <toolkit:SettingsCard ContentAlignment="Left" IsClickEnabled="False" IsActionIconVisible="False">
                                <CheckBox x:Name="DeepLCheck" Content="DeepL" IsChecked="True"/>
                            </toolkit:SettingsCard>
                            <toolkit:SettingsCard ContentAlignment="Left" IsClickEnabled="False" IsActionIconVisible="False">
                                <CheckBox x:Name="GoogleCheck" Content="Google" IsChecked="True"/>
                            </toolkit:SettingsCard>
                        </toolkit:SettingsExpander.Items>
                    </toolkit:SettingsExpander>
                    <toolkit:SettingsCard Header="API Key（可选）" IsClickEnabled="False" IsActionIconVisible="False" HorizontalAlignment="Stretch">
                        <TextBox x:Name="ApiKeyBox" PlaceholderText="留空则无需认证" MinWidth="180" VerticalAlignment="Center"/>
                    </toolkit:SettingsCard>
                    </StackPanel>

                    <!-- 关于 -->
                    <StackPanel x:Name="AboutPanel" Visibility="Collapsed" Spacing="12" HorizontalAlignment="Stretch">
                    <TextBlock x:Name="AboutTitle" Text="关于" FontSize="28" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    <TextBlock Text="Local Translate Provider" FontSize="18" FontWeight="SemiBold"/>
                    <TextBlock Text="（待填充）" Opacity="0.6"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </ScrollViewer>
    </NavigationView>
</Window>
